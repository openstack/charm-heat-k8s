name: heat-k8s
summary: OpenStack heat service
maintainer: OpenStack Charmers <openstack-charmers@lists.ubuntu.com>
description: |
  Heat is the main project in the OpenStack Orchestration program. It implements an
  orchestration engine to launch multiple composite cloud applications based on
  templates in the form of text files that can be treated like code.
version: 3
bases:
  - name: ubuntu
    channel: 22.04/stable
assumes:
  - k8s-api
  - juju >= 3.1
tags:
- openstack
source: https://opendev.org/openstack/charm-heat-k8s
issues: https://bugs.launchpad.net/charm-heat-k8s

containers:
  heat-api:
    resource: heat-api-image
  heat-api-cfn:
    resource: heat-api-cfn-image
  heat-engine:
    resource: heat-engine-image

resources:
  heat-api-image:
    type: oci-image
    description: OCI image for OpenStack Heat
    # docker.io/kolla/ubuntu-binary-heat-api:yoga
    upstream-source: docker.io/kolla/ubuntu-binary-heat-api@sha256:ca80d57606525facb404d8b0374701c02609c2ade5cb7e28ba132e666dd85949
  heat-api-cfn-image:
    type: oci-image
    description: OCI image for OpenStack Heat CFN
    # docker.io/kolla/ubuntu-binary-heat-api-cfn:yoga
    upstream-source: docker.io/kolla/ubuntu-binary-heat-api-cfn@sha256:6eec5915066b55696414022c86c42360cdbd4b8b1250e06b470fee25af394b66
  heat-engine-image:
    type: oci-image
    description: OCI image for OpenStack Heat Engine
    upstream-source: docker.io/kolla/ubuntu-binary-heat-engine@sha256:a54491f7e09eedeaa42c046cedc478f8ba78fc455a6ba285a52a5d0f8ae1df84

requires:
  database:
    interface: mysql_client
    limit: 1
  identity-service:
    interface: keystone
  ingress-internal:
    interface: ingress
    optional: true
    limit: 1
  ingress-public:
    interface: ingress
    limit: 1
  amqp:
    interface: rabbitmq

peers:
  peers:
    interface: heat-peer
